<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/Users/rsavian/Sites/StructureJS/js/model/BaseModel.js - StructureJS</title>
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/vendor/yui-min.js"></script>
</head>
<body>

<div id="doc">
    <header class="main-header">
        <div class="content">
            <div class="project-title">
                
                
                    <h1 class="project-name">StructureJS</h1> <span class="project-version">0.14.6</span>
                
                
                    <p class="description">A class based utility library for building modular and scalable web platform applications. Features opt-in classes and utilities which provide a solid foundation and toolset to build your next project.</p>
                
            </div>
            <ul class="jump-links">
                <li><a href="#index" class="index-jump-link">index</a></li>
                <li><a href="#top" class="top-jump-link">top</a></li>
            </ul>
        </div>
    </header>
    <div id="bd" class="main-body">

        <div id="docs-sidebar" class="sidebar apidocs">
            <div id="api-list">
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a class="type" href="../classes/ApplicationCacheEvent.html">ApplicationCacheEvent</a></li>
            
                <li><a class="type" href="../classes/ApplicationCacheService.html">ApplicationCacheService</a></li>
            
                <li><a class="type" href="../classes/BaseEvent.html">BaseEvent</a></li>
            
                <li><a class="type" href="../classes/BaseModel.html">BaseModel</a></li>
            
                <li><a class="type" href="../classes/BaseObject.html">BaseObject</a></li>
            
                <li><a class="type" href="../classes/BrowserUtil.html">BrowserUtil</a></li>
            
                <li><a class="type" href="../classes/BulkLoader.html">BulkLoader</a></li>
            
                <li><a class="type" href="../classes/BulkLoaderEvent.html">BulkLoaderEvent</a></li>
            
                <li><a class="type" href="../classes/Collection.html">Collection</a></li>
            
                <li><a class="type" href="../classes/ComponentFactory.html">ComponentFactory</a></li>
            
                <li><a class="type" href="../classes/DateUtil.html">DateUtil</a></li>
            
                <li><a class="type" href="../classes/DisplayObject.html">DisplayObject</a></li>
            
                <li><a class="type" href="../classes/DisplayObjectContainer.html">DisplayObjectContainer</a></li>
            
                <li><a class="type" href="../classes/DOMElement.html">DOMElement</a></li>
            
                <li><a class="type" href="../classes/EventBroker.html">EventBroker</a></li>
            
                <li><a class="type" href="../classes/EventDispatcher.html">EventDispatcher</a></li>
            
                <li><a class="type" href="../classes/Extend.html">Extend</a></li>
            
                <li><a class="type" href="../classes/ImageLoader.html">ImageLoader</a></li>
            
                <li><a class="type" href="../classes/LoaderEvent.html">LoaderEvent</a></li>
            
                <li><a class="type" href="../classes/LocalStorageEvent.html">LocalStorageEvent</a></li>
            
                <li><a class="type" href="../classes/LocalStorageService.html">LocalStorageService</a></li>
            
                <li><a class="type" href="../classes/MathUtil.html">MathUtil</a></li>
            
                <li><a class="type" href="../classes/MerchantUtil.html">MerchantUtil</a></li>
            
                <li><a class="type" href="../classes/NetworkMonitor.html">NetworkMonitor</a></li>
            
                <li><a class="type" href="../classes/NetworkMonitorEvent.html">NetworkMonitorEvent</a></li>
            
                <li><a class="type" href="../classes/NumberUtil.html">NumberUtil</a></li>
            
                <li><a class="type" href="../classes/ObjectManager.html">ObjectManager</a></li>
            
                <li><a class="type" href="../classes/Point.html">Point</a></li>
            
                <li><a class="type" href="../classes/Route.html">Route</a></li>
            
                <li><a class="type" href="../classes/Router.html">Router</a></li>
            
                <li><a class="type" href="../classes/RouterEvent.html">RouterEvent</a></li>
            
                <li><a class="type" href="../classes/Stage.html">Stage</a></li>
            
                <li><a class="type" href="../classes/StringUtil.html">StringUtil</a></li>
            
                <li><a class="type" href="../classes/TemplateFactory.html">TemplateFactory</a></li>
            
                <li><a class="type" href="../classes/Timer.html">Timer</a></li>
            
                <li><a class="type" href="../classes/TimerEvent.html">TimerEvent</a></li>
            
                <li><a class="type" href="../classes/Util.html">Util</a></li>
            
                <li><a class="type" href="../classes/ValidationUtil.html">ValidationUtil</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a class="module" href="../modules/controller.html">controller</a></li>
            
                <li><a class="module" href="../modules/core.html">core</a></li>
            
                <li><a class="module" href="../modules/event.html">event</a></li>
            
                <li><a class="module" href="../modules/geom.html">geom</a></li>
            
                <li><a class="module" href="../modules/model.html">model</a></li>
            
                <li><a class="module" href="../modules/StructureJS.html">StructureJS</a></li>
            
                <li><a class="module" href="../modules/util.html">util</a></li>
            
                <li><a class="module" href="../modules/view.html">view</a></li>
            
            </ul>
        </div>
    </div>
</div>

        </div>

        <div id="docs-main" class="apidocs">
            <div class="content container">
                <h1 class="file-heading">File: /Users/rsavian/Sites/StructureJS/js/model/BaseModel.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var __extends = (this &amp;&amp; this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
(function (factory) {
    if (typeof module === &#x27;object&#x27; &amp;&amp; typeof module.exports === &#x27;object&#x27;) {
        var v = factory(require, exports); if (v !== undefined) module.exports = v;
    }
    else if (typeof define === &#x27;function&#x27; &amp;&amp; define.amd) {
        define([&quot;require&quot;, &quot;exports&quot;, &#x27;../BaseObject&#x27;, &#x27;../util/Util&#x27;], factory);
    }
})(function (require, exports) {
    &quot;use strict&quot;;
    var BaseObject_1 = require(&#x27;../BaseObject&#x27;);
    var Util_1 = require(&#x27;../util/Util&#x27;);
    /**
     *  Base Model is a design pattern used to transfer data between software application subsystems.
     *
     * Note: If the data doesn&#x27;t match the property names you can set the value manually after update super method has been called.
     *  Also in the class you inherit BaseModel from you can override the update method to handle the data how you want.
     *
     * @class BaseModel
     * @extends BaseObject
     * @param [data] {any} Provide a way to update the  Base Model upon initialization.
     * @module StructureJS
     * @submodule model
     * @requires Extend
     * @requires BaseObject
     * @requires Util
     * @constructor
     * @author Robert S. (www.codeBelt.com)
     * @example
     *      // Example how to extend the BaseModel class.
     *      let data = {
     *              make: &#x27;Tesla&#x27;,
     *              model: &#x27;Model S&#x27;,
     *              YeAr: 2014,
     *              feature: {
     *                  abs: true,
     *                  airbags: true
     *              }
     *      }
     *      let carModel = new CarModel(data);
     *
     *
     *      // Example how to extend the BaseModel class.
     *      class CarModel extends BaseModel {
     *
     *          // You need to have properties so the data will get assigned.
     *          // If not the data will not get assigned to the model.
     *          make = null;
     *          model = null;
     *          year = null;
     *          allWheel = false; // Set a default value
     *
     *          // You can assign BaseModel to a property which will
     *          // automatically created it and pass the data to it.
     *          feature = FeatureModel
     *
     *          // If you have an array of data and want them assign to a BaseModel.
     *          feature = [FeatureModel];
     *
     *          constructor(data = {}) {
     *              super();
     *
     *              this.update(data);
     *          }
     *
     *          // @overridden BaseModel.update
     *          update(data) {
     *              super.update(data);
     *
     *              // If the data doesn&#x27;t match the property name.
     *              // You can set the value(s) manually after the update super method has been called.
     *              this.year = data.YeAr;
     *          }
     *      }
     */
    var BaseModel = (function (_super) {
        __extends(BaseModel, _super);
        function BaseModel() {
            _super.call(this);
        }
        /**
         * Provide a way to update the  Base Model.
         *
         * @method update
         * @param [data={}] {any}
         * @public
         * @example
         *     // Example of updating some of the data:
         *     carModel.update({ year: 2015, allWheel: true});
         *
         *     // Of course you can also do it the following way:
         *     carModel.year = 2015;
         *     carModel.allWheel = false;
         */
        BaseModel.prototype.update = function (data) {
            var _this = this;
            if (data === void 0) { data = {}; }
            Object
                .keys(this)
                .forEach(function (propertyName) {
                // Ignore the sjsId property because it is set in the BaseObject constructor and we don&#x27;t want to update it.
                if (propertyName !== &#x27;sjsId&#x27;) {
                    var currentData = _this[propertyName];
                    var newData = data[propertyName];
                    var propertyData = (newData !== void 0) ? newData : currentData;
                    _this._updatePropertyWithNewData(propertyName, propertyData);
                }
            });
            return this;
        };
        /**
         * Add the newData to the property
         *
         * @method _updatePropertyWithNewData
         * @param propertyName
         * @param newData
         * @protected
         */
        BaseModel.prototype._updatePropertyWithNewData = function (propertyName, newData) {
            var _this = this;
            // If the current property on the model is an array and the newData is an array.
            if ((this[propertyName] instanceof Array === true) &amp;&amp; (newData instanceof Array === true)) {
                var isCurrentValueAnUninstantiatedBaseModel = (typeof this[propertyName][0] === &#x27;function&#x27; &amp;&amp; this[propertyName][0].IS_BASE_MODEL === true);
                var isNewValueAnUninstantiatedBaseModel = (typeof newData[0] === &#x27;function&#x27; &amp;&amp; newData[0].IS_BASE_MODEL === true);
                // If the current data and the new data are both uninstantiated BaseModel we don&#x27;t want to continue.
                if ((isCurrentValueAnUninstantiatedBaseModel === true &amp;&amp; isNewValueAnUninstantiatedBaseModel === true) === false) {
                    var baseModelOrUndefined_1 = this[propertyName][0];
                    this[propertyName] = newData.map(function (data) { return _this._updateData(baseModelOrUndefined_1, data); });
                }
                else {
                    this[propertyName] = [];
                }
            }
            else {
                this[propertyName] = this._updateData(this[propertyName], newData);
            }
        };
        /**
         * TODO: YUIDoc_comment
         *
         * @method _updateData
         * @param keyValue
         * @param newData
         * @protected
         */
        BaseModel.prototype._updateData = function (keyValue, newData) {
            if (typeof newData === &#x27;function&#x27; &amp;&amp; newData.IS_BASE_MODEL === true) {
                // If newData is a function and has an IS_BASE_MODEL static property then it must be a child model and we need to return null
                // so it cleans up the BaseModel functions on the property.
                // Note to self if we want to create an empty model then return &quot;new newData()&quot;.
                return null;
            }
            if (typeof keyValue === &#x27;function&#x27; &amp;&amp; keyValue.IS_BASE_MODEL === true) {
                // If the property is an instance of a BaseModel class and has not been created yet.
                // Instantiate it and pass in the newData to the constructor.
                keyValue = new keyValue(newData);
            }
            else if ((keyValue instanceof BaseModel) === true) {
                // If property is an instance of a BaseModel class and has already been created.
                // Call the update method and pass in the newData.
                keyValue.update(newData);
            }
            else {
                // Else just assign the newData to the property.
                keyValue = newData;
            }
            return keyValue;
        };
        /**
         * Converts the Base Model data into a JSON object and deletes the sjsId property.
         *
         * @method toJSON
         * @returns {any}
         * @public
         * @example
         *     let obj = carModel.toJSON();
         */
        BaseModel.prototype.toJSON = function () {
            var clone = Util_1.default.clone(this);
            return Util_1.default.deletePropertyFromObject(clone, [&#x27;sjsId&#x27;]);
        };
        /**
         * Converts a  Base Model to a JSON string,
         *
         * @method toJSONString
         * @returns {string}
         * @public
         * @example
         *     let str = carModel.toJSONString();
         */
        BaseModel.prototype.toJSONString = function () {
            return JSON.stringify(this.toJSON());
        };
        /**
         * Converts the string json data into an Object and calls the {{#crossLink &quot;BaseModel/update:method&quot;}}{{/crossLink}} method with the converted Object.
         *
         * @method fromJSON
         * @param json {string}
         * @public
         * @example
         *      let str = &#x27;{&quot;make&quot;:&quot;Tesla&quot;,&quot;model&quot;:&quot;Model S&quot;,&quot;year&quot;:2014}&#x27;
         *      let carModel = new CarModel();
         *      carModel.fromJSON(str);
         */
        BaseModel.prototype.fromJSON = function (json) {
            var parsedData = JSON.parse(json);
            this.update(parsedData);
            return this;
        };
        /**
         * Create a clone/copy of the  Base Model.
         *
         * @method clone
         * @returns {BaseModel}
         * @public
         * @example
         *     let clone = carModel.clone();
         */
        BaseModel.prototype.clone = function () {
            var clonedBaseModel = new this.constructor(this);
            return clonedBaseModel;
        };
        /**
         * This property helps distinguish a BaseModel from other functions.
         *
         * @property IS_BASE_MODEL
         * @type {boolean}
         * @public
         * @static
         * @readonly
         */
        BaseModel.IS_BASE_MODEL = true;
        return BaseModel;
    }(BaseObject_1.default));
    Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
    exports.default = BaseModel;
});

    </pre>
</div>

            </div>
        </div>

    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/vendor/jquery.min.js"></script>
<script src="../assets/js/jquery-offscreen-trigger.js"></script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
